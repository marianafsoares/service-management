<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mappers.ClientPaymentMapper">

    <resultMap id="ClientPaymentResultMap" type="models.ClientPayment">
        <id property="id" column="id"/>
        <result property="receiptNumber" column="receipt_number"/>
        <result property="pointOfSale" column="point_of_sale"/>
        <result property="issuerCuit" column="issuer_cuit"/>
        <result property="clientId" column="client_id"/>
        <result property="clientName" column="client_name"/>
        <result property="receiptDate" column="receipt_date"/>
        <result property="total" column="total"/>
    </resultMap>

    <select id="findAll" resultMap="ClientPaymentResultMap">
        SELECT cr.id,
               cr.receipt_number,
               cr.point_of_sale,
               cr.issuer_cuit,
               cr.client_id,
               c.full_name AS client_name,
               cr.receipt_date,
               cr.total
        FROM client_receipt cr
        JOIN client c ON cr.client_id = c.id
    </select>

    <select id="findById" resultMap="ClientPaymentResultMap" parameterType="int">
        SELECT cr.id,
               cr.receipt_number,
               cr.point_of_sale,
               cr.issuer_cuit,
               cr.client_id,
               c.full_name AS client_name,
               cr.receipt_date,
               cr.total
        FROM client_receipt cr
        JOIN client c ON cr.client_id = c.id
        WHERE cr.id = #{id}
    </select>

</mapper>
